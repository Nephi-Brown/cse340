<h1><%= title %></h1>

<% if (typeof messages === "function") { 
  const flashHtml = messages();
  if (flashHtml) { %>
    <div class="flash-message">
      <%- flashHtml %>
    </div>
<%  } } %>

<% if (errors) { %>
  <ul class="notice">
    <% errors.array().forEach(error => { %>
      <li><%= error.msg %></li>
    <% }) %>
  </ul>
<% } %>

<section id="edit-inventory-page">
  <div class="edit-inventory-panel">
    <p class="edit-inventory-note">ALL FIELDS ARE REQUIRED TO MODIFY THIS VEHICLE.</p>

    <form id="updateForm" action="/inv/update" method="post" class="edit-inventory-form">

      <label for="classificationList">Classification</label>
      <%- classificationSelect %>

      <label for="inv_make">Make</label>
      <input
        type="text"
        id="inv_make"
        name="inv_make"
        required
        minlength="2"
        value="<%= inv_make %>"
      >

      <label for="inv_model">Model</label>
      <input 
        type="text"
        id="inv_model" 
        name="inv_model"
        required
        minlength="2"
        value="<%= inv_model %>"
      >

      <label for="inv_year">Year</label>
      <input
        type="number"
        id="inv_year" 
        name="inv_year"
        required
        min="1900"
        max="2100"
        value="<%= inv_year %>"
      >

      <label for="inv_description">Description</label>
      <textarea 
        id="inv_description" 
        name="inv_description"
        required
        minlength="10"
        rows="8"
      ><%= inv_description %></textarea>

      <label for="inv_image">Image Path</label>
      <input 
        type="text"
        id="inv_image" 
        name="inv_image"
        required
        value="<%= inv_image %>"
      >

      <label for="inv_thumbnail">Thumbnail Path</label>
      <input 
        type="text"
        id="inv_thumbnail" 
        name="inv_thumbnail"
        required
        value="<%= inv_thumbnail %>"
      >

      <label for="inv_price">Price</label>
      <input 
        type="number"
        id="inv_price" 
        name="inv_price"
        required
        min="0"
        step="0.01"
        value="<%= inv_price %>"
      >

      <label for="inv_miles">Miles</label>
      <input 
        type="number"
        id="inv_miles" 
        name="inv_miles"
        required
        min="0"
        value="<%= inv_miles %>"
      >

      <label for="inv_color">Color</label>
      <input 
        type="text"
        id="inv_color"
        name="inv_color"
        required
        minlength="3"
        value="<%= inv_color %>"
      >

      <!-- Submit Button (Disabled Until Something Changes) -->
      <button type="submit" disabled>Update Vehicle</button>

      <!-- Hidden primary key exactly as required -->
      <input type="hidden" name="inv_id"
      <% if (locals.inv_id) { %> value="<%= locals.inv_id %>" <% } %>>

    </form>

    <!-- JavaScript for enabling the Update button -->
    <script src="/js/inv-update.js"></script>

  </div>
</section>
