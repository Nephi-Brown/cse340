<h1><%= title %></h1>

<% if (typeof messages === "function") { 
  const flashHtml = messages();
  if (flashHtml) { %>
    <div class="flash-message">
      <%- flashHtml %>
    </div>
<%  } 
} %>

<main id="inv-management">
  <section class="inv-management-panel">
    <p>Use the tools below to manage vehicle classifications and inventory.</p>

    <ul class="inv-management-actions">
      <li>
        <a href="/inv/add-classification">Add New Classification</a>
      </li>
      <li>
        <a href="/inv/add-inventory">Add New Vehicle</a>
      </li>
    </ul>

    <h2>Manage Inventory</h2>
    <p>Select a classification from the list to see the items belonging to that classification.</p>

    <% if (typeof classificationList !== "undefined") { %>
      <%- classificationList %>
    <% } %>

    <table id="inventoryDisplay"></table>

    <noscript>JavaScript must be enabled to use this page.</noscript>

    <ul class="classification-list">
      <% if (typeof classifications !== "undefined" && classifications.length > 0) { %>
        <% classifications.forEach(c => { %>
          <li>
            <span><%= c.classification_name %></span>
            <form 
              action="/inv/delete-classification/<%= c.classification_id %>" 
              method="post"
              style="display:inline"
            >
              <button type="submit" onclick="return confirm('Delete this classification?')">
                Delete
              </button>
            </form>
          </li>     
        <% }) %>
      <% } else { %>
        <li>No classifications available.</li>
      <% } %>
    </ul>

    <h2>Delete Classification by Name</h2>
    <form class="delete-by-name-form" action="/inv/delete-classification-by-name" method="post">
      <label for="classification_name">Classification Name</label>
      <input 
        type="text" 
        id="classification_name" 
        name="classification_name" 
        required 
        minlength="3"
      >
      <button type="submit" onclick="return confirm('Deleted this classification by name?')">
        Delete by Name
      </button>
    </form>
  </section> 
</main>

<script src="/js/inventory.js"></script>